function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{LW9I:function(e,t,n){var a={"./en.json":["Jnu8",8],"./ru.json":["TCAd",9],"./ua.json":["fs5/",10]};function c(e){if(!n.o(a,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=a[e],c=t[0];return n.e(t[1]).then((function(){return n.t(c,3)}))}c.keys=function(){return Object.keys(a)},c.id="LW9I",e.exports=c},dqiB:function(e,t,n){"use strict";n.r(t),n.d(t,"GameMunchkinModule",(function(){return F}));var a,c=n("sEIs"),r=n("b5yJ"),i=n("GoAz"),s=n("YtkY"),o=n("aIvW"),u=n("RtVY"),l=n("2zyY"),b=n("l3rL"),h=n("ZTXN"),m=n("8j5Y"),p=n("TLy2"),d=n("jIqt"),f=n("kuMc"),y=n("5U9e"),g=n("u5fr"),v=n("0hWG"),C=n("JPLv"),k=n("EM62"),I=n("vobO"),O=((a=function(){function e(t,n){_classCallCheck(this,e),this.httpClient=t,this.configurationService=n,this.apiBaseUrl="".concat(this.configurationService.configuration.apiUrl,"games/munchkin")}return _createClass(e,[{key:"joinGame",value:function(e){return this.httpClient.post("".concat(this.apiBaseUrl,"/").concat(e,"/users"),null)}},{key:"getGameById",value:function(e){return this.httpClient.get("".concat(this.apiBaseUrl,"/").concat(e))}}]),e}()).\u0275fac=function(e){return new(e||a)(k.Yb(I.b),k.Yb(C.a))},a.\u0275prov=k.Kb({token:a,factory:a.\u0275fac}),a),U=n("2kYt"),w=n("Meci"),_=n("bFHC"),j=n("nKqi"),T=n("0h2g");function S(e,t){1&e&&(k.Ub(0,"mat-card-subtitle"),k.xc(1),k.hc(2,"translate"),k.Tb()),2&e&&(k.Cb(1),k.zc(" ",k.ic(2,1,"Me")," "))}function M(e,t){if(1&e&&(k.Ub(0,"mat-card",1),k.Ub(1,"mat-card-header"),k.Pb(2,"mat-icon",2),k.Ub(3,"mat-card-title",3),k.xc(4),k.Tb(),k.wc(5,S,3,3,"mat-card-subtitle",4),k.Tb(),k.Ub(6,"mat-card-content"),k.Ub(7,"mat-list"),k.Ub(8,"mat-list-item"),k.Ub(9,"span",5),k.xc(10),k.hc(11,"translate"),k.Tb(),k.Ub(12,"span",6),k.xc(13),k.Tb(),k.Tb(),k.Ub(14,"mat-list-item"),k.Ub(15,"span",5),k.xc(16),k.hc(17,"translate"),k.Tb(),k.Ub(18,"span",6),k.xc(19),k.Tb(),k.Tb(),k.Ub(20,"mat-list-item"),k.Ub(21,"span",5),k.xc(22),k.hc(23,"translate"),k.Tb(),k.Ub(24,"span",6),k.xc(25),k.Tb(),k.Tb(),k.Tb(),k.Tb(),k.Tb()),2&e){var n=t.$implicit,a=k.gc();k.Fb("my-card",n.id===a.myUserId),k.Cb(4),k.zc(" ",n.name," "),k.Cb(1),k.mc("ngIf",n.id===a.myUserId),k.Cb(5),k.zc(" ",k.ic(11,10,"Level")," "),k.Cb(3),k.yc(n.level),k.Cb(3),k.zc(" ",k.ic(17,12,"Cards in hands")," "),k.Cb(3),k.zc(" ",n.cardIdsInHands.length," "),k.Cb(3),k.zc(" ",k.ic(23,14,"Cards on table")," "),k.Cb(3),k.zc(" ",n.cardIdsOnTable.length," ")}}var x,P,D,$=((P=function e(){_classCallCheck(this,e)}).\u0275fac=function(e){return new(e||P)},P.\u0275cmp=k.Ib({type:P,selectors:[["bg-munchkin-players"]],inputs:{players:"players",myUserId:"myUserId"},decls:1,vars:1,consts:[["class","player-card",3,"my-card",4,"ngFor","ngForOf"],[1,"player-card"],["mat-card-avatar","","svgIcon","icon-user",1,"player-card__avatar"],[1,"player-card__title"],[4,"ngIf"],[1,"player-card__property-name"],[1,"player-card__property-value"]],template:function(e,t){1&e&&k.wc(0,M,26,16,"mat-card",0),2&e&&k.mc("ngForOf",t.players)},directives:[U.j,w.a,w.d,_.a,w.b,w.g,U.k,w.c,j.a,j.c,w.f],pipes:[T.a],styles:["[_nghost-%COMP%]{background-color:#e5e5e5}.player-card[_ngcontent-%COMP%]{margin:10px}.player-card__property-name[_ngcontent-%COMP%]{font-weight:700}"],changeDetection:0}),P),z=((x=function e(){_classCallCheck(this,e)}).\u0275fac=function(e){return new(e||x)},x.\u0275cmp=k.Ib({type:x,selectors:[["bg-munchkin-board"]],decls:1,vars:0,template:function(e,t){1&e&&k.xc(0,"Board\n")},styles:["[_nghost-%COMP%]{background-color:grey}"],changeDetection:0}),x),G=n("Et1r"),L=[{path:":gameId",component:(D=function(){function e(t,n,a,c,r){_classCallCheck(this,e),this.route=t,this.socketService=n,this.gameMunchkinService=a,this.chatService=c,this.userSettingsService=r,this.tearDown$=new h.a}return _createClass(e,[{key:"ngOnInit",value:function(){this.initGame(),this.initChat()}},{key:"ngOnDestroy",value:function(){this.gameId&&this.socketService.emit(new b.h(this.gameId)),this.tearDown$.next(),this.tearDown$.complete()}},{key:"initGame",value:function(){var e=this;this.route.params.pipe(Object(m.a)((function(t){return e.gameId=t.gameId})),Object(p.a)((function(){return e.gameMunchkinService.joinGame(e.gameId)})),Object(p.a)((function(){return e.socketService.listenAnyOf(b.f,b.g,b.j).pipe(Object(d.a)(-1),Object(p.a)((function(){return e.gameMunchkinService.getGameById(e.gameId)})),Object(m.a)((function(t){return e.game=t})))})),Object(f.a)(this.tearDown$)).subscribe()}},{key:"initChat",value:function(){var e=this;this.userSettingsService.userSettings$.pipe(Object(f.a)(this.tearDown$)).subscribe((function(t){e.myUserId=t.id,e.chatService.myName=t.name})),this.socketService.listen(b.a).pipe(Object(f.a)(this.tearDown$)).subscribe((function(t){return e.chatService.sendMessage(t.payload.from,t.payload.text)})),this.chatService.myMessages$.pipe(Object(f.a)(this.tearDown$)).subscribe((function(t){var n=new b.a({gameId:e.gameId,from:e.chatService.myName,text:t});e.socketService.emit(n)}))}}]),e}(),D.\u0275fac=function(e){return new(e||D)(k.Ob(c.a),k.Ob(y.a),k.Ob(O),k.Ob(v.a),k.Ob(g.a))},D.\u0275cmp=k.Ib({type:D,selectors:[["bg-game-munchkin"]],features:[k.Bb([v.a])],decls:4,vars:2,consts:[[3,"players","myUserId"]],template:function(e,t){1&e&&(k.Pb(0,"bg-munchkin-players",0),k.Ub(1,"div"),k.Pb(2,"bg-munchkin-board"),k.Pb(3,"bg-chat"),k.Tb()),2&e&&k.mc("players",t.game&&t.game.players)("myUserId",t.myUserId)},directives:[$,z,G.a],styles:["[_nghost-%COMP%]{height:calc(100vh - 48px)}"],changeDetection:0}),D)}];n("xxSF");var B,F=((B=function e(){_classCallCheck(this,e)}).\u0275mod=k.Mb({type:B}),B.\u0275inj=k.Lb({factory:function(e){return new(e||B)},providers:[O],imports:[[c.e.forChild(L),r.c.forChild([{provide:r.b,useFactory:function(){return new o.a((function(e){return Object(i.a)(n("LW9I")("./".concat(e,".json"))).pipe(Object(s.a)((function(e){return e.default})))}))}}]),l.a,u.a]]}),B)}}]);