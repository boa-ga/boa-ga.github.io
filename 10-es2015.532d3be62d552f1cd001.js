(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{kqdH:function(e,t,s){"use strict";s.r(t),s.d(t,"GameTestModule",(function(){return I}));var r=s("tyNb"),a=s("RtVY"),i=s("2zyY"),c=s("XNiG"),n=s("1G5W"),o=s("vkgz"),h=s("eIep"),b=s("rQPq"),u=s("GI87"),l=s("0hWG"),p=s("fXoL"),m=s("5U9e"),g=s("tk/3"),f=s("JPLv");let v=(()=>{class e{constructor(e,t){this.httpClient=e,this.configurationService=t,this.apiBaseUrl=`${this.configurationService.configuration.apiUrl}games/test`}joinGame(e){return this.httpClient.post(`${this.apiBaseUrl}/${e}/users`,null)}}return e.\u0275fac=function(t){return new(t||e)(p.Yb(g.b),p.Yb(f.a))},e.\u0275prov=p.Kb({token:e,factory:e.\u0275fac}),e})();var d=s("u5fr");let y=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=p.Ib({type:e,selectors:[["bg-test-players"]],decls:1,vars:0,template:function(e,t){1&e&&p.yc(0,"Players\n")},styles:[""]}),e})();var w=s("XiUz");let S=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=p.Ib({type:e,selectors:[["bg-test-board"]],decls:1,vars:0,template:function(e,t){1&e&&p.yc(0,"Board\n")},styles:["[_nghost-%COMP%]{background-color:grey}"]}),e})();var x=s("Et1r");const O=[{path:":gameId",component:(()=>{class e{constructor(e,t,s,r,a){this.route=e,this.socketService=t,this.gameTestService=s,this.chatService=r,this.userSettingsService=a,this.tearDown$=new c.a}ngOnInit(){this.route.params.pipe(Object(n.a)(this.tearDown$),Object(o.a)(e=>this.gameId=e.gameId),Object(h.a)(()=>this.gameTestService.joinGame(this.gameId))).subscribe(),this.userSettingsService.userSettings$.pipe(Object(n.a)(this.tearDown$)).subscribe(e=>this.chatService.myName=e.name),this.socketService.listen(b.a).pipe(Object(n.a)(this.tearDown$)).subscribe(e=>this.chatService.sendMessage(e.payload.from,e.payload.text)),this.chatService.myMessages$.pipe(Object(n.a)(this.tearDown$)).subscribe(e=>{const t=new b.a({gameId:this.gameId,from:this.chatService.myName,text:e});this.socketService.emit(t)})}ngOnDestroy(){this.gameId&&this.socketService.emit(new u.e(this.gameId)),this.tearDown$.next(),this.tearDown$.complete()}}return e.\u0275fac=function(t){return new(t||e)(p.Ob(r.a),p.Ob(m.a),p.Ob(v),p.Ob(l.a),p.Ob(d.a))},e.\u0275cmp=p.Ib({type:e,selectors:[["bg-game-test"]],features:[p.Bb([l.a])],decls:4,vars:0,consts:[["fxFlex","250px"],["fxFlex","","fxLayout","column"],["fxFlex",""],["fxFlex","0 0 300px"]],template:function(e,t){1&e&&(p.Pb(0,"bg-test-players",0),p.Ub(1,"div",1),p.Pb(2,"bg-test-board",2),p.Pb(3,"bg-chat",3),p.Tb())},directives:[y,w.a,w.c,S,x.a],styles:["[_nghost-%COMP%]{height:calc(100vh - 64px)}"]}),e})()}];let I=(()=>{class e{}return e.\u0275mod=p.Mb({type:e}),e.\u0275inj=p.Lb({factory:function(t){return new(t||e)},providers:[v],imports:[[r.i.forChild(O),i.a,a.a]]}),e})()}}]);