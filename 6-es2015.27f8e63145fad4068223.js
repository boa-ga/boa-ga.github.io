(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{LW9I:function(e,t,a){var n={"./en.json":["Jnu8",8],"./ru.json":["TCAd",9],"./ua.json":["fs5/",10]};function r(e){if(!a.o(n,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=n[e],r=t[0];return a.e(t[1]).then((function(){return a.t(r,3)}))}r.keys=function(){return Object.keys(n)},r.id="LW9I",e.exports=r},dqiB:function(e,t,a){"use strict";a.r(t),a.d(t,"GameMunchkinModule",(function(){return P}));var n=a("sEIs"),r=a("b5yJ"),c=a("GoAz"),s=a("YtkY"),i=a("/oaF"),o=a("RtVY"),b=a("2zyY"),h=a("l3rL"),l=a("ZTXN"),m=a("8j5Y"),p=a("TLy2"),u=a("jIqt"),d=a("kuMc"),y=a("5U9e"),g=a("u5fr"),f=a("0hWG"),v=a("JPLv"),I=a("EM62"),O=a("vobO");let U=(()=>{class e{constructor(e,t){this.httpClient=e,this.configurationService=t,this.apiBaseUrl=`${this.configurationService.configuration.apiUrl}games/munchkin`}joinGame(e){return this.httpClient.post(`${this.apiBaseUrl}/${e}/users`,null)}getGameById(e){return this.httpClient.get(`${this.apiBaseUrl}/${e}`)}}return e.\u0275fac=function(t){return new(t||e)(I.Yb(O.b),I.Yb(v.a))},e.\u0275prov=I.Kb({token:e,factory:e.\u0275fac}),e})();var k=a("2kYt"),C=a("Meci"),w=a("bFHC"),j=a("nKqi"),x=a("qFEQ"),S=a("0h2g");function T(e,t){1&e&&(I.Ub(0,"mat-card-subtitle"),I.yc(1),I.hc(2,"translate"),I.Tb()),2&e&&(I.Cb(1),I.Ac(" ",I.ic(2,1,"Me")," "))}function M(e,t){if(1&e&&(I.Ub(0,"mat-card",1),I.Ub(1,"mat-card-header"),I.Pb(2,"mat-icon",2),I.Ub(3,"mat-card-title",3),I.yc(4),I.Tb(),I.xc(5,T,3,3,"mat-card-subtitle",4),I.Tb(),I.Ub(6,"mat-card-content"),I.Ub(7,"mat-list"),I.Ub(8,"mat-list-item"),I.Ub(9,"span",5),I.yc(10),I.hc(11,"translate"),I.Tb(),I.Ub(12,"span",6),I.yc(13),I.Tb(),I.Tb(),I.Ub(14,"mat-list-item"),I.Ub(15,"span",5),I.yc(16),I.hc(17,"translate"),I.Tb(),I.Ub(18,"span",6),I.yc(19),I.Tb(),I.Tb(),I.Ub(20,"mat-list-item"),I.Ub(21,"span",5),I.yc(22),I.hc(23,"translate"),I.Tb(),I.Ub(24,"span",6),I.yc(25),I.Tb(),I.Tb(),I.Tb(),I.Tb(),I.Tb()),2&e){const e=t.$implicit,a=I.gc();I.Fb("my-card",e.id===a.myUserId),I.Cb(4),I.Ac(" ",e.name," "),I.Cb(1),I.mc("ngIf",e.id===a.myUserId),I.Cb(5),I.Ac(" ",I.ic(11,10,"Level")," "),I.Cb(3),I.zc(e.level),I.Cb(3),I.Ac(" ",I.ic(17,12,"Cards in hands")," "),I.Cb(3),I.Ac(" ",e.cardIdsInHands.length," "),I.Cb(3),I.Ac(" ",I.ic(23,14,"Cards on table")," "),I.Cb(3),I.Ac(" ",e.cardIdsOnTable.length," ")}}let _=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=I.Ib({type:e,selectors:[["bg-munchkin-players"]],inputs:{players:"players",myUserId:"myUserId"},decls:1,vars:1,consts:[["class","player-card",3,"my-card",4,"ngFor","ngForOf"],[1,"player-card"],["mat-card-avatar","","svgIcon","icon-user",1,"player-card__avatar"],[1,"player-card__title"],[4,"ngIf"],["fxFlex","",1,"player-card__property-name"],[1,"player-card__property-value"]],template:function(e,t){1&e&&I.xc(0,M,26,16,"mat-card",0),2&e&&I.mc("ngForOf",t.players)},directives:[k.j,C.a,C.d,w.a,C.b,C.g,k.k,C.c,j.a,j.c,x.a,C.f],pipes:[S.a],styles:["[_nghost-%COMP%]{background-color:#e5e5e5}.player-card[_ngcontent-%COMP%]{margin:10px}.player-card__property-name[_ngcontent-%COMP%]{font-weight:700}"],changeDetection:0}),e})(),$=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=I.Ib({type:e,selectors:[["bg-munchkin-board"]],decls:1,vars:0,template:function(e,t){1&e&&I.yc(0,"Board\n")},styles:["[_nghost-%COMP%]{background-color:grey}"],changeDetection:0}),e})();var F=a("Et1r");const D=[{path:":gameId",component:(()=>{class e{constructor(e,t,a,n,r){this.route=e,this.socketService=t,this.gameMunchkinService=a,this.chatService=n,this.userSettingsService=r,this.tearDown$=new l.a}ngOnInit(){this.initGame(),this.initChat()}ngOnDestroy(){this.gameId&&this.socketService.emit(new h.h(this.gameId)),this.tearDown$.next(),this.tearDown$.complete()}initGame(){this.route.params.pipe(Object(m.a)(e=>this.gameId=e.gameId),Object(p.a)(()=>this.gameMunchkinService.joinGame(this.gameId)),Object(p.a)(()=>this.socketService.listenAnyOf(h.f,h.g,h.j).pipe(Object(u.a)(-1),Object(p.a)(()=>this.gameMunchkinService.getGameById(this.gameId)),Object(m.a)(e=>this.game=e))),Object(d.a)(this.tearDown$)).subscribe()}initChat(){this.userSettingsService.userSettings$.pipe(Object(d.a)(this.tearDown$)).subscribe(e=>{this.myUserId=e.id,this.chatService.myName=e.name}),this.socketService.listen(h.a).pipe(Object(d.a)(this.tearDown$)).subscribe(e=>this.chatService.sendMessage(e.payload.from,e.payload.text)),this.chatService.myMessages$.pipe(Object(d.a)(this.tearDown$)).subscribe(e=>{const t=new h.a({gameId:this.gameId,from:this.chatService.myName,text:e});this.socketService.emit(t)})}}return e.\u0275fac=function(t){return new(t||e)(I.Ob(n.a),I.Ob(y.a),I.Ob(U),I.Ob(f.a),I.Ob(g.a))},e.\u0275cmp=I.Ib({type:e,selectors:[["bg-game-munchkin"]],features:[I.Bb([f.a])],decls:4,vars:2,consts:[["fxFlex","250px",3,"players","myUserId"],["fxFlex","","fxLayout","column"],["fxFlex",""],["fxFlex","0 0 300px"]],template:function(e,t){1&e&&(I.Pb(0,"bg-munchkin-players",0),I.Ub(1,"div",1),I.Pb(2,"bg-munchkin-board",2),I.Pb(3,"bg-chat",3),I.Tb()),2&e&&I.mc("players",t.game&&t.game.players)("myUserId",t.myUserId)},directives:[_,x.a,x.c,$,F.a],styles:["[_nghost-%COMP%]{height:calc(100vh - 64px)}"],changeDetection:0}),e})()}];a("xxSF");let P=(()=>{class e{}return e.\u0275mod=I.Mb({type:e}),e.\u0275inj=I.Lb({factory:function(t){return new(t||e)},providers:[U],imports:[[n.i.forChild(D),r.c.forChild([{provide:r.b,useFactory:()=>new i.a(e=>Object(c.a)(a("LW9I")(`./${e}.json`)).pipe(Object(s.a)(e=>e.default)))}]),b.a,o.a]]}),e})()}}]);