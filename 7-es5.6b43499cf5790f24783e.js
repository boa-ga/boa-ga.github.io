function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{aaQ5:function(e,t,n){var a={"./en.json":["5+an",11],"./ru.json":["ECuT",12],"./ua.json":["GgiT",13]};function r(e){if(!n.o(a,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=a[e],r=t[0];return n.e(t[1]).then((function(){return n.t(r,3)}))}r.keys=function(){return Object.keys(a)},r.id="aaQ5",e.exports=r},kqdH:function(e,t,n){"use strict";n.r(t),n.d(t,"GameTestModule",(function(){return T}));var a,r,i,c,s=n("sEIs"),o=n("b5yJ"),u=n("GoAz"),l=n("YtkY"),h=n("2yxt"),f=n("py9/"),b=n("l3rL"),p=n("ZTXN"),d=n("ROBh"),m=n("8j5Y"),v=n("TLy2"),g=n("kuMc"),y=n("bZE4"),w=n("lGQG"),C=n("5U9e"),k=n("JPLv"),O=n("EM62"),S=n("vobO"),j=((i=function(){function e(t,n){_classCallCheck(this,e),this.httpClient=t,this.configurationService=n,this.apiBaseUrl=this.configurationService.configuration.apiUrl+"games/test"}return _createClass(e,[{key:"joinGame",value:function(e){return this.httpClient.post("".concat(this.apiBaseUrl,"/").concat(e,"/users"),null)}}]),e}()).\u0275fac=function(e){return new(e||i)(O.Wb(S.b),O.Wb(k.a))},i.\u0275prov=O.Ib({token:i,factory:i.\u0275fac}),i),M=((r=function e(){_classCallCheck(this,e)}).\u0275fac=function(e){return new(e||r)},r.\u0275cmp=O.Gb({type:r,selectors:[["bg-test-players"]],decls:1,vars:0,template:function(e,t){1&e&&O.uc(0,"Players\n")},styles:[""],changeDetection:0}),r),_=((a=function e(){_classCallCheck(this,e)}).\u0275fac=function(e){return new(e||a)},a.\u0275cmp=O.Gb({type:a,selectors:[["bg-test-board"]],decls:1,vars:0,template:function(e,t){1&e&&O.uc(0,"Board\n")},styles:["[_nghost-%COMP%]{background-color:grey}"],changeDetection:0}),a),D=n("+XlM"),I=[{path:":gameId",component:(c=function(){function e(t,n,a,r,i){_classCallCheck(this,e),this.route=t,this.socketService=n,this.gameTestService=a,this.chatService=r,this.authService=i,this.tearDown$=new p.a}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.route.params.pipe(Object(m.a)((function(t){return e.gameId=t.gameId})),Object(v.a)((function(){return e.gameId?e.gameTestService.joinGame(e.gameId):Object(d.a)()})),Object(g.a)(this.tearDown$)).subscribe(),this.authService.user$.pipe(Object(g.a)(this.tearDown$)).subscribe((function(t){return e.chatService.myName=t.name})),this.socketService.listen(b.ChatSendMessageAction).pipe(Object(g.a)(this.tearDown$)).subscribe((function(t){return e.chatService.sendMessage(t.payload.from,t.payload.text)})),this.chatService.myMessages$.pipe(Object(g.a)(this.tearDown$)).subscribe((function(t){if(e.gameId){var n=new b.ChatSendMessageAction({gameId:e.gameId,from:e.chatService.myName,text:t});e.socketService.emit(n)}}))}},{key:"ngOnDestroy",value:function(){this.gameId&&this.socketService.emit(new b.LeaveGameAction(this.gameId)),this.tearDown$.next(),this.tearDown$.complete()}}]),e}(),c.\u0275fac=function(e){return new(e||c)(O.Mb(s.a),O.Mb(C.a),O.Mb(j),O.Mb(y.a),O.Mb(w.a))},c.\u0275cmp=O.Gb({type:c,selectors:[["bg-game-test"]],features:[O.zb([y.a])],decls:4,vars:0,template:function(e,t){1&e&&(O.Nb(0,"bg-test-players"),O.Sb(1,"div"),O.Nb(2,"bg-test-board"),O.Nb(3,"bg-chat"),O.Rb())},directives:[M,_,D.a],styles:["[_nghost-%COMP%]{height:calc(100vh - 48px)}"],changeDetection:0}),c)}];n("xxSF");var G,T=((G=function e(){_classCallCheck(this,e)}).\u0275mod=O.Kb({type:G}),G.\u0275inj=O.Jb({factory:function(e){return new(e||G)},providers:[j],imports:[[s.e.forChild(I),o.TranslateModule.forChild([{provide:o.T9nsLoaderService,useFactory:function(){return new f.a((function(e){return Object(u.a)(n("aaQ5")("./".concat(e,".json"))).pipe(Object(l.a)((function(e){return e.default})))}))}}]),h.a]]}),G)}}]);