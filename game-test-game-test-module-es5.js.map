{"version":3,"sources":["webpack:///src/app/games/game-test/game-test.component.ts","webpack:///src/app/games/game-test/game-test.component.html","webpack:///src/app/games/game-test/game-test.module.ts","webpack:///src/app/games/game-test/game-test.routes.ts","webpack:///src/app/games/game-test/game-test.service.ts","webpack:///src/app/games/game-test/test-board/test-board.component.ts","webpack:///src/app/games/game-test/test-board/test-board.component.html","webpack:///src/app/games/game-test/test-players/test-players.component.ts","webpack:///src/app/games/game-test/test-players/test-players.component.html"],"names":["GameTestComponent","route","socketService","gameTestService","chatService","userSettingsService","tearDown$","params","pipe","gameId","joinGame","subscribe","userSettings$","settings","myName","name","listen","action","sendMessage","payload","from","text","myMessages$","sendMessageAction","emit","next","complete","selector","templateUrl","styleUrls","providers","GameTestModule","forChild","imports","declarations","exports","gameTestRoutes","path","component","GameTestService","httpClient","configurationService","apiBaseUrl","configuration","apiUrl","post","TestBoardComponent","TestPlayersComponent"],"mappings":";;;;;;;;;;;;;;;;;;;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;QAiBaA,iB;AAKX,iCACUC,KADV,EAEUC,aAFV,EAGUC,eAHV,EAIUC,WAJV,EAKUC,mBALV,EAKkD;AAAA;;AAJxC,aAAAJ,KAAA,GAAAA,KAAA;AACA,aAAAC,aAAA,GAAAA,aAAA;AACA,aAAAC,eAAA,GAAAA,eAAA;AACA,aAAAC,WAAA,GAAAA,WAAA;AACA,aAAAC,mBAAA,GAAAA,mBAAA;AAPF,aAAAC,SAAA,GAAY,IAAI,4CAAJ,EAAZ;AAQJ;;;;mCAEO;AAAA;;AACT,eAAKL,KAAL,CAAWM,MAAX,CACGC,IADH,CAEI,2DAAI,UAACD,MAAD;AAAA,mBAAa,KAAI,CAACE,MAAL,GAAcF,MAAM,CAACE,MAAlC;AAAA,WAAJ,CAFJ,EAGI,iEAAU;AAAA,mBAAM,KAAI,CAACN,eAAL,CAAqBO,QAArB,CAA8B,KAAI,CAACD,MAAnC,CAAN;AAAA,WAAV,CAHJ,EAII,iEAAU,KAAKH,SAAf,CAJJ,EAMGK,SANH;AAQA,eAAKN,mBAAL,CAAyBO,aAAzB,CACGJ,IADH,CACQ,iEAAU,KAAKF,SAAf,CADR,EAEGK,SAFH,CAEa,UAACE,QAAD;AAAA,mBAAe,KAAI,CAACT,WAAL,CAAiBU,MAAjB,GAA0BD,QAAQ,CAACE,IAAlD;AAAA,WAFb;AAIA,eAAKb,aAAL,CACGc,MADH,CACU,4EADV,EAEGR,IAFH,CAEQ,iEAAU,KAAKF,SAAf,CAFR,EAGGK,SAHH,CAGa,UAACM,MAAD;AAAA,mBACT,KAAI,CAACb,WAAL,CAAiBc,WAAjB,CAA6BD,MAAM,CAACE,OAAP,CAAeC,IAA5C,EAAkDH,MAAM,CAACE,OAAP,CAAeE,IAAjE,CADS;AAAA,WAHb;AAOA,eAAKjB,WAAL,CAAiBkB,WAAjB,CACGd,IADH,CACQ,iEAAU,KAAKF,SAAf,CADR,EAEGK,SAFH,CAEa,UAACU,IAAD,EAAU;AACnB,gBAAME,iBAAiB,GAAG,IAAI,4EAAJ,CAA0B;AAClDd,oBAAM,EAAE,KAAI,CAACA,MADqC;AAElDW,kBAAI,EAAE,KAAI,CAAChB,WAAL,CAAiBU,MAF2B;AAGlDO,kBAAI,EAAJA;AAHkD,aAA1B,CAA1B;;AAMA,iBAAI,CAACnB,aAAL,CAAmBsB,IAAnB,CAAwBD,iBAAxB;AACD,WAVH;AAWD;;;sCAEa;AACZ,cAAI,KAAKd,MAAT,EAAiB;AACf,iBAAKP,aAAL,CAAmBsB,IAAnB,CAAwB,IAAI,sEAAJ,CAAoB,KAAKf,MAAzB,CAAxB;AACD;;AAED,eAAKH,SAAL,CAAemB,IAAf;AACA,eAAKnB,SAAL,CAAeoB,QAAf;AACD;;;;;;;uBArDU1B,iB,EAAiB,+H,EAAA,uI,EAAA,mI,EAAA,sI,EAAA,oJ;AAAA,K;;;YAAjBA,iB;AAAiB,mC;AAAA,kFAFjB,CAAC,qEAAD,CAEiB,E;AAFJ,c;AAAA,a;AAAA,kH;AAAA;AAAA;ACf1B;;AACA;;AACE;;AACA;;AACF;;;;;;;;;sEDaaA,iB,EAAiB;cAN7B,uDAM6B;eANnB;AACT2B,kBAAQ,EAAE,cADD;AAETC,qBAAW,EAAE,4BAFJ;AAGTC,mBAAS,EAAE,CAAC,4BAAD,CAHF;AAITC,mBAAS,EAAE,CAAC,qEAAD;AAJF,S;AAMmB,Q;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AEjB9B;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;QAiBaC,c;;;;;YAAAA;;;;yBAAAA,c;AAAc,O;AAAA,iBAHd,CAAC,kEAAD,C;AAAiB,gBAFnB,CAAC,6DAAaC,QAAb,CAAsB,gEAAtB,CAAD,EAAwC,uEAAxC,EAAwD,mEAAxD,CAEmB;;;;0HAGjBD,c,EAAc;AAAA,uBAJV,sEAIU,EAJS,yFAIT,EAJ+B,mFAI/B;AAJiD,gFADzB,uEACyB,EADT,mEACS,CAIjD;AALkD,kBAGjE,sEAHiE;AAKlD,O;AAFE,K;;;;;sEAEhBA,c,EAAc;cAN1B,sDAM0B;eANjB;AACRE,iBAAO,EAAE,CAAC,6DAAaD,QAAb,CAAsB,gEAAtB,CAAD,EAAwC,uEAAxC,EAAwD,mEAAxD,CADD;AAERE,sBAAY,EAAE,CAAC,sEAAD,EAAoB,yFAApB,EAA0C,mFAA1C,CAFN;AAGRJ,mBAAS,EAAE,CAAC,kEAAD,CAHH;AAIRK,iBAAO,EAAE,CAAC,sEAAD;AAJD,S;AAMiB,Q;;;;;;;;;;;;;;;;;;ACf3B;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;AAEO,QAAMC,cAAc,GAAW,CACpC;AACEC,UAAI,EAAE,SADR;AAEEC,eAAS,EAAE;AAFb,KADoC,CAA/B;;;;;;;;;;;;;;;;ACJP;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;QAOaC,e;AAGX,+BACUC,UADV,EAEUC,oBAFV,EAEoD;AAAA;;AAD1C,aAAAD,UAAA,GAAAA,UAAA;AACA,aAAAC,oBAAA,GAAAA,oBAAA;AAJF,aAAAC,UAAA,aAAgB,KAAKD,oBAAL,CAA0BE,aAA1B,CAAwCC,MAAxD;AAKJ;;;;iCAEKnC,M,EAAc;AACrB,iBAAO,KAAK+B,UAAL,CAAgBK,IAAhB,WACF,KAAKH,UADH,cACiBjC,MADjB,aAEL,IAFK,CAAP;AAID;;;;;;;uBAbU8B,e,EAAe,uH,EAAA,4I;AAAA,K;;;aAAfA,e;AAAe,eAAfA,eAAe;;;;;sEAAfA,e,EAAe;cAD3B;AAC2B,Q;;;;;;;;;;;;;;;;;;;;;;;;ACP5B;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;QAOaO,kB;;;;;uBAAAA,kB;AAAkB,K;;;YAAlBA,kB;AAAkB,oC;AAAA,c;AAAA,a;AAAA;AAAA;ACP/B;;;;;;;;sEDOaA,kB,EAAkB;cAL9B,uDAK8B;eALpB;AACTnB,kBAAQ,EAAE,eADD;AAETC,qBAAW,EAAE,6BAFJ;AAGTC,mBAAS,EAAE,CAAC,6BAAD;AAHF,S;AAKoB,Q;;;;;;;;;;;;;;;;;;AEP/B;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;QAOakB,oB;;;;;uBAAAA,oB;AAAoB,K;;;YAApBA,oB;AAAoB,sC;AAAA,c;AAAA,a;AAAA;AAAA;ACPjC;;;;;;;;sEDOaA,oB,EAAoB;cALhC,uDAKgC;eALtB;AACTpB,kBAAQ,EAAE,iBADD;AAETC,qBAAW,EAAE,+BAFJ;AAGTC,mBAAS,EAAE,CAAC,+BAAD;AAHF,S;AAKsB,Q","file":"game-test-game-test-module-es5.js","sourcesContent":["import { Component, OnDestroy, OnInit } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\nimport { ChatSendMessageAction, LeaveGameAction } from '@boa-ga/api-interfaces';\nimport { Subject } from 'rxjs';\nimport { switchMap, takeUntil, tap } from 'rxjs/operators';\n\nimport { SocketService } from '../../services/socket.service';\nimport { UserSettingsService } from '../../services/user-settings.service';\nimport { ChatService } from '../../shared/chat/chat.service';\nimport { GameTestService } from './game-test.service';\n\n@Component({\n  selector: 'bg-game-test',\n  templateUrl: './game-test.component.html',\n  styleUrls: ['./game-test.component.scss'],\n  providers: [ChatService],\n})\nexport class GameTestComponent implements OnInit, OnDestroy {\n  gameId: string;\n\n  private tearDown$ = new Subject();\n\n  constructor(\n    private route: ActivatedRoute,\n    private socketService: SocketService,\n    private gameTestService: GameTestService,\n    private chatService: ChatService,\n    private userSettingsService: UserSettingsService,\n  ) {}\n\n  ngOnInit() {\n    this.route.params\n      .pipe(\n        tap((params) => (this.gameId = params.gameId)),\n        switchMap(() => this.gameTestService.joinGame(this.gameId)),\n        takeUntil(this.tearDown$),\n      )\n      .subscribe();\n\n    this.userSettingsService.userSettings$\n      .pipe(takeUntil(this.tearDown$))\n      .subscribe((settings) => (this.chatService.myName = settings.name));\n\n    this.socketService\n      .listen(ChatSendMessageAction)\n      .pipe(takeUntil(this.tearDown$))\n      .subscribe((action) =>\n        this.chatService.sendMessage(action.payload.from, action.payload.text),\n      );\n\n    this.chatService.myMessages$\n      .pipe(takeUntil(this.tearDown$))\n      .subscribe((text) => {\n        const sendMessageAction = new ChatSendMessageAction({\n          gameId: this.gameId,\n          from: this.chatService.myName,\n          text,\n        });\n\n        this.socketService.emit(sendMessageAction);\n      });\n  }\n\n  ngOnDestroy() {\n    if (this.gameId) {\n      this.socketService.emit(new LeaveGameAction(this.gameId));\n    }\n\n    this.tearDown$.next();\n    this.tearDown$.complete();\n  }\n}\n","<bg-test-players fxFlex=\"250px\"></bg-test-players>\n<div fxFlex fxLayout=\"column\">\n  <bg-test-board fxFlex></bg-test-board>\n  <bg-chat fxFlex=\"0 0 300px\"></bg-chat>\n</div>\n","import { NgModule } from '@angular/core';\nimport { RouterModule } from '@angular/router';\n\nimport { ChatModule } from '../../shared/chat/chat.module';\nimport { SharedUIModule } from '../../shared/shared-ui.module';\nimport { GameTestComponent } from './game-test.component';\nimport { gameTestRoutes } from './game-test.routes';\nimport { GameTestService } from './game-test.service';\nimport { TestBoardComponent } from './test-board/test-board.component';\nimport { TestPlayersComponent } from './test-players/test-players.component';\n\n@NgModule({\n  imports: [RouterModule.forChild(gameTestRoutes), SharedUIModule, ChatModule],\n  declarations: [GameTestComponent, TestPlayersComponent, TestBoardComponent],\n  providers: [GameTestService],\n  exports: [GameTestComponent],\n})\nexport class GameTestModule {}\n","import { Routes } from '@angular/router';\n\nimport { GameTestComponent } from './game-test.component';\n\nexport const gameTestRoutes: Routes = [\n  {\n    path: ':gameId',\n    component: GameTestComponent,\n  },\n];\n","import { HttpClient } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\n\nimport { ConfigurationService } from '../../services/configuration.service';\n\n@Injectable()\nexport class GameTestService {\n  private apiBaseUrl = `${this.configurationService.configuration.apiUrl}games/test`;\n\n  constructor(\n    private httpClient: HttpClient,\n    private configurationService: ConfigurationService,\n  ) {}\n\n  joinGame(gameId: string): Observable<void> {\n    return this.httpClient.post<void>(\n      `${this.apiBaseUrl}/${gameId}/users`,\n      null,\n    );\n  }\n}\n","import { Component } from '@angular/core';\n\n@Component({\n  selector: 'bg-test-board',\n  templateUrl: './test-board.component.html',\n  styleUrls: ['./test-board.component.scss'],\n})\nexport class TestBoardComponent {}\n","Board\n","import { Component } from '@angular/core';\n\n@Component({\n  selector: 'bg-test-players',\n  templateUrl: './test-players.component.html',\n  styleUrls: ['./test-players.component.scss'],\n})\nexport class TestPlayersComponent {}\n","Players\n"]}