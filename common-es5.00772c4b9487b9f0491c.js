function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var s=0;s<t.length;s++){var n=t[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,s){return t&&_defineProperties(e.prototype,t),s&&_defineProperties(e,s),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"+XlM":function(e,t,s){"use strict";s.d(t,"a",(function(){return p}));var n=s("EM62"),a=s("ZTXN"),i=s("kuMc"),c=s("bZE4"),r=s("nKqi"),o=s("2kYt"),u=s("nIj0"),l=s("29Wa"),m=s("Cd2c"),g=s("bFHC"),b=s("mFH5"),f=s("0h2g"),h=["messagesList"];function d(e,t){if(1&e&&(n.Sb(0,"mat-list-item"),n.Nb(1,"mat-icon",6),n.Sb(2,"div",7),n.Sb(3,"p",8),n.uc(4),n.Rb(),n.Sb(5,"p",9),n.uc(6),n.Rb(),n.Rb(),n.Rb()),2&e){var s=t.$implicit;n.Ab(1),n.ic("svgIcon",s.isSystem?"icon-info":"icon-user"),n.Ab(3),n.vc(s.from),n.Ab(2),n.vc(s.text)}}var p=function(){var e=function(){function e(t){_classCallCheck(this,e),this.chatService=t,this.tearDown$=new a.a,this.isScrollToLastRequired=!1}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.chatService.messages$.pipe(Object(i.a)(this.tearDown$)).subscribe((function(t){e.messages=t,e.isScrollToLastRequired=!0}))}},{key:"ngAfterViewChecked",value:function(){this.isScrollToLastRequired&&(this.scrollToBottom(),this.isScrollToLastRequired=!1)}},{key:"trackByFn",value:function(e,t){return t.timestamp}},{key:"onSubmit",value:function(){this.currentMessage&&(this.chatService.sendMessageFromMe(this.currentMessage),this.currentMessage="")}},{key:"ngOnDestroy",value:function(){this.tearDown$.next(),this.tearDown$.complete()}},{key:"scrollToBottom",value:function(){if(this.messagesList){var e=this.messagesList.nativeElement;e.scrollTop=e.scrollHeight}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(n.Mb(c.a))},e.\u0275cmp=n.Gb({type:e,selectors:[["bg-chat"]],viewQuery:function(e,t){var s;1&e&&n.yc(h,!0,n.l),2&e&&n.kc(s=n.ac())&&(t.messagesList=s.first)},decls:11,vars:10,consts:[[1,"chat__messages-container"],["messagesList",""],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"chat__form",3,"ngSubmit"],["matInput","","name","message","autocomplete","off",3,"placeholder","ngModel","ngModelChange"],["mat-button","","type","submit",3,"disabled"],["mat-list-avatar","",1,"chat__message-icon",3,"svgIcon"],["mat-line",""],[1,"chat__message-title"],[1,"chat__message-text"]],template:function(e,t){1&e&&(n.Sb(0,"div"),n.Sb(1,"mat-list",0,1),n.tc(3,d,7,3,"mat-list-item",2),n.Rb(),n.Sb(4,"form",3),n.Zb("ngSubmit",(function(){return t.onSubmit()})),n.Sb(5,"mat-form-field"),n.Sb(6,"input",4),n.Zb("ngModelChange",(function(e){return t.currentMessage=e})),n.dc(7,"translate"),n.Rb(),n.Rb(),n.Sb(8,"button",5),n.uc(9),n.dc(10,"translate"),n.Rb(),n.Rb(),n.Rb()),2&e&&(n.Ab(3),n.ic("ngForOf",t.messages)("ngForTrackBy",t.trackByFn),n.Ab(3),n.jc("placeholder",n.ec(7,6,"Message")),n.ic("ngModel",t.currentMessage),n.Ab(2),n.ic("disabled",!t.currentMessage),n.Ab(1),n.wc(" ",n.ec(10,8,"Send")," "))},directives:[r.a,o.k,u.k,u.g,u.h,l.b,m.a,u.a,u.f,u.i,r.c,g.a,r.b,b.g],pipes:[f.a],styles:[".chat__messages-container[_ngcontent-%COMP%]{overflow:auto}.chat__message-icon[_ngcontent-%COMP%]{height:24px;width:24px}.chat__message-title[_ngcontent-%COMP%]{font-size:14px;font-weight:700;margin:0}.chat__message-text[_ngcontent-%COMP%]{font-size:14px;margin:0;white-space:pre-line;word-break:break-all}"],changeDetection:0}),e}()},"2yxt":function(e,t,s){"use strict";s.d(t,"a",(function(){return m}));var n=s("2kYt"),a=s("nIj0"),i=s("bFHC"),c=s("Cd2c"),r=s("nKqi"),o=s("b5yJ"),u=s("bZE4"),l=s("EM62"),m=function(){var e=function e(){_classCallCheck(this,e)};return e.\u0275mod=l.Kb({type:e}),e.\u0275inj=l.Jb({factory:function(t){return new(t||e)},providers:[u.a],imports:[[n.c,a.c,r.d,c.b,i.b,o.TranslateModule]]}),e}()},bZE4:function(e,t,s){"use strict";s.d(t,"a",(function(){return c}));var n=s("C05f"),a=s("ZTXN"),i=s("EM62"),c=function(){var e=function(){function e(){_classCallCheck(this,e),this.myName="Me",this.messages=[],this.messagesSubject=new n.a(this.messages),this.myMessagesSubject=new a.a}return _createClass(e,[{key:"sendMessageFromMe",value:function(e){this.sendMessage(this.myName,e),this.myMessagesSubject.next(e)}},{key:"sendMessage",value:function(e,t){this.messages.push({from:e,text:t,timestamp:(new Date).toISOString()}),this.messagesSubject.next(this.messages)}},{key:"sendSystemMessage",value:function(e){this.messages.push({text:e,isSystem:!0,timestamp:(new Date).toISOString()}),this.messagesSubject.next(this.messages)}},{key:"messages$",get:function(){return this.messagesSubject.asObservable()}},{key:"myMessages$",get:function(){return this.myMessagesSubject.asObservable()}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=i.Ib({token:e,factory:e.\u0275fac}),e}()}}]);