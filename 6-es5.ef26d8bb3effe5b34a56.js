function _defineProperties(t,a){for(var e=0;e<a.length;e++){var r=a[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _createClass(t,a,e){return a&&_defineProperties(t.prototype,a),e&&_defineProperties(t,e),t}function _classCallCheck(t,a){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{LW9I:function(t,a,e){var r={"./en.json":["Jnu8",8],"./ru.json":["TCAd",9],"./ua.json":["fs5/",10]};function n(t){if(!e.o(r,t))return Promise.resolve().then((function(){var a=new Error("Cannot find module '"+t+"'");throw a.code="MODULE_NOT_FOUND",a}));var a=r[t],n=a[0];return e.e(a[1]).then((function(){return e.t(n,3)}))}n.keys=function(){return Object.keys(r)},n.id="LW9I",t.exports=n},dqiB:function(t,a,e){"use strict";e.r(a),e.d(a,"GameMunchkinModule",(function(){return it}));var r,n,i,c,o,s,d,m,l,u=e("2kYt"),h=e("5lCh"),p=e("mFH5"),b=e("EM62"),f=["*",[["mat-card-footer"]]],g=["*","mat-card-footer"],y=[[["","mat-card-avatar",""],["","matCardAvatar",""]],[["mat-card-title"],["mat-card-subtitle"],["","mat-card-title",""],["","mat-card-subtitle",""],["","matCardTitle",""],["","matCardSubtitle",""]],"*"],v=["[mat-card-avatar], [matCardAvatar]","mat-card-title, mat-card-subtitle,\n      [mat-card-title], [mat-card-subtitle],\n      [matCardTitle], [matCardSubtitle]","*"],C=((d=function t(){_classCallCheck(this,t)}).\u0275fac=function(t){return new(t||d)},d.\u0275dir=b.Hb({type:d,selectors:[["mat-card-content"],["","mat-card-content",""],["","matCardContent",""]],hostAttrs:[1,"mat-card-content"]}),d),x=((s=function t(){_classCallCheck(this,t)}).\u0275fac=function(t){return new(t||s)},s.\u0275dir=b.Hb({type:s,selectors:[["mat-card-title"],["","mat-card-title",""],["","matCardTitle",""]],hostAttrs:[1,"mat-card-title"]}),s),k=((o=function t(){_classCallCheck(this,t)}).\u0275fac=function(t){return new(t||o)},o.\u0275dir=b.Hb({type:o,selectors:[["mat-card-subtitle"],["","mat-card-subtitle",""],["","matCardSubtitle",""]],hostAttrs:[1,"mat-card-subtitle"]}),o),w=((c=function t(){_classCallCheck(this,t)}).\u0275fac=function(t){return new(t||c)},c.\u0275dir=b.Hb({type:c,selectors:[["","mat-card-avatar",""],["","matCardAvatar",""]],hostAttrs:[1,"mat-card-avatar"]}),c),S=((i=function t(a){_classCallCheck(this,t),this._animationMode=a}).\u0275fac=function(t){return new(t||i)(b.Mb(h.a,8))},i.\u0275cmp=b.Gb({type:i,selectors:[["mat-card"]],hostAttrs:[1,"mat-card","mat-focus-indicator"],hostVars:2,hostBindings:function(t,a){2&t&&b.Db("_mat-animation-noopable","NoopAnimations"===a._animationMode)},exportAs:["matCard"],ngContentSelectors:g,decls:2,vars:0,template:function(t,a){1&t&&(b.hc(f),b.gc(0),b.gc(1,1))},styles:[".mat-card{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);display:block;position:relative;padding:16px;border-radius:4px}._mat-animation-noopable.mat-card{transition:none;animation:none}.mat-card .mat-divider-horizontal{position:absolute;left:0;width:100%}[dir=rtl] .mat-card .mat-divider-horizontal{left:auto;right:0}.mat-card .mat-divider-horizontal.mat-divider-inset{position:static;margin:0}[dir=rtl] .mat-card .mat-divider-horizontal.mat-divider-inset{margin-right:0}.cdk-high-contrast-active .mat-card{outline:solid 1px}.mat-card-actions,.mat-card-subtitle,.mat-card-content{display:block;margin-bottom:16px}.mat-card-title{display:block;margin-bottom:8px}.mat-card-actions{margin-left:-8px;margin-right:-8px;padding:8px 0}.mat-card-actions-align-end{display:flex;justify-content:flex-end}.mat-card-image{width:calc(100% + 32px);margin:0 -16px 16px -16px}.mat-card-footer{display:block;margin:0 -16px -16px -16px}.mat-card-actions .mat-button,.mat-card-actions .mat-raised-button,.mat-card-actions .mat-stroked-button{margin:0 8px}.mat-card-header{display:flex;flex-direction:row}.mat-card-header .mat-card-title{margin-bottom:12px}.mat-card-header-text{margin:0 16px}.mat-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;object-fit:cover}.mat-card-title-group{display:flex;justify-content:space-between}.mat-card-sm-image{width:80px;height:80px}.mat-card-md-image{width:112px;height:112px}.mat-card-lg-image{width:152px;height:152px}.mat-card-xl-image{width:240px;height:240px;margin:-8px}.mat-card-title-group>.mat-card-xl-image{margin:-8px 0 8px}@media(max-width: 599px){.mat-card-title-group{margin:0}.mat-card-xl-image{margin-left:0;margin-right:0}}.mat-card>:first-child,.mat-card-content>:first-child{margin-top:0}.mat-card>:last-child:not(.mat-card-footer),.mat-card-content>:last-child:not(.mat-card-footer){margin-bottom:0}.mat-card-image:first-child{margin-top:-16px;border-top-left-radius:inherit;border-top-right-radius:inherit}.mat-card>.mat-card-actions:last-child{margin-bottom:-8px;padding-bottom:0}.mat-card-actions .mat-button:first-child,.mat-card-actions .mat-raised-button:first-child,.mat-card-actions .mat-stroked-button:first-child{margin-left:0;margin-right:0}.mat-card-title:not(:first-child),.mat-card-subtitle:not(:first-child){margin-top:-4px}.mat-card-header .mat-card-subtitle:not(:first-child){margin-top:-8px}.mat-card>.mat-card-xl-image:first-child{margin-top:-8px}.mat-card>.mat-card-xl-image:last-child{margin-bottom:-8px}\n"],encapsulation:2,changeDetection:0}),i),_=((n=function t(){_classCallCheck(this,t)}).\u0275fac=function(t){return new(t||n)},n.\u0275cmp=b.Gb({type:n,selectors:[["mat-card-header"]],hostAttrs:[1,"mat-card-header"],ngContentSelectors:v,decls:4,vars:0,consts:[[1,"mat-card-header-text"]],template:function(t,a){1&t&&(b.hc(y),b.gc(0),b.Sb(1,"div",0),b.gc(2,1),b.Rb(),b.gc(3,2))},encapsulation:2,changeDetection:0}),n),I=((r=function t(){_classCallCheck(this,t)}).\u0275mod=b.Kb({type:r}),r.\u0275inj=b.Jb({factory:function(t){return new(t||r)},imports:[[p.f],p.f]}),r),O=e("bFHC"),j=e("nKqi"),A=e("sEIs"),M=e("b5yJ"),U=e("GoAz"),D=e("YtkY"),G=e("2yxt"),R=e("py9/"),L=e("l3rL"),P=e("ZTXN"),T=e("ROBh"),N=e("8j5Y"),$=e("TLy2"),B=e("jIqt"),F=e("kuMc"),J=e("bZE4"),z=e("lGQG"),H=e("5U9e"),E=e("JPLv"),W=e("vobO"),Y=((l=function(){function t(a,e){_classCallCheck(this,t),this.httpClient=a,this.configurationService=e,this.apiBaseUrl=this.configurationService.configuration.apiUrl+"games/munchkin"}return _createClass(t,[{key:"joinGame",value:function(t){return this.httpClient.post("".concat(this.apiBaseUrl,"/").concat(t,"/users"),null)}},{key:"getGameById",value:function(t){return this.httpClient.get("".concat(this.apiBaseUrl,"/").concat(t))}}]),t}()).\u0275fac=function(t){return new(t||l)(b.Wb(W.b),b.Wb(E.a))},l.\u0275prov=b.Ib({token:l,factory:l.\u0275fac}),l),q=((m=function t(){_classCallCheck(this,t)}).\u0275fac=function(t){return new(t||m)},m.\u0275cmp=b.Gb({type:m,selectors:[["bg-munchkin-board"]],decls:1,vars:0,template:function(t,a){1&t&&b.uc(0,"Board\n")},styles:["[_nghost-%COMP%]{background-color:grey}"],changeDetection:0}),m),K=e("+XlM"),X=e("0h2g");function Z(t,a){1&t&&(b.Sb(0,"mat-card-subtitle"),b.uc(1),b.dc(2,"translate"),b.Rb()),2&t&&(b.Ab(1),b.wc(" ",b.ec(2,1,"Me")," "))}function Q(t,a){if(1&t&&(b.Sb(0,"mat-card",1),b.Sb(1,"mat-card-header"),b.Nb(2,"mat-icon",2),b.Sb(3,"mat-card-title",3),b.uc(4),b.Rb(),b.tc(5,Z,3,3,"mat-card-subtitle",4),b.Rb(),b.Sb(6,"mat-card-content"),b.Sb(7,"mat-list"),b.Sb(8,"mat-list-item"),b.Sb(9,"span",5),b.uc(10),b.dc(11,"translate"),b.Rb(),b.Sb(12,"span",6),b.uc(13),b.Rb(),b.Rb(),b.Sb(14,"mat-list-item"),b.Sb(15,"span",5),b.uc(16),b.dc(17,"translate"),b.Rb(),b.Sb(18,"span",6),b.uc(19),b.Rb(),b.Rb(),b.Sb(20,"mat-list-item"),b.Sb(21,"span",5),b.uc(22),b.dc(23,"translate"),b.Rb(),b.Sb(24,"span",6),b.uc(25),b.Rb(),b.Rb(),b.Rb(),b.Rb(),b.Rb()),2&t){var e=a.$implicit,r=b.cc();b.Db("my-card",e.id===r.myUserId),b.Ab(4),b.wc(" ",e.name," "),b.Ab(1),b.ic("ngIf",e.id===r.myUserId),b.Ab(5),b.wc(" ",b.ec(11,10,"Level")," "),b.Ab(3),b.vc(e.level),b.Ab(3),b.wc(" ",b.ec(17,12,"Cards in hands")," "),b.Ab(3),b.wc(" ",e.cardIdsInHands.length," "),b.Ab(3),b.wc(" ",b.ec(23,14,"Cards on table")," "),b.Ab(3),b.wc(" ",e.cardIdsOnTable.length," ")}}var V,tt=((V=function t(){_classCallCheck(this,t)}).\u0275fac=function(t){return new(t||V)},V.\u0275cmp=b.Gb({type:V,selectors:[["bg-munchkin-players"]],inputs:{players:"players",myUserId:"myUserId"},decls:1,vars:1,consts:[["class","player-card",3,"my-card",4,"ngFor","ngForOf"],[1,"player-card"],["mat-card-avatar","","svgIcon","icon-user",1,"player-card__avatar"],[1,"player-card__title"],[4,"ngIf"],[1,"player-card__property-name"],[1,"player-card__property-value"]],template:function(t,a){1&t&&b.tc(0,Q,26,16,"mat-card",0),2&t&&b.ic("ngForOf",a.players)},directives:[u.k,S,_,O.a,w,x,u.l,C,j.a,j.c,k],pipes:[X.a],styles:["[_nghost-%COMP%]{background-color:#e5e5e5}.player-card[_ngcontent-%COMP%]{margin:10px}.player-card__property-name[_ngcontent-%COMP%]{font-weight:700}"],changeDetection:0}),V);function at(t,a){if(1&t&&b.Nb(0,"bg-munchkin-players",1),2&t){var e=b.cc();b.ic("players",e.game.players)("myUserId",e.myUserId)}}var et,rt=[{path:":gameId",component:(et=function(){function t(a,e,r,n,i){_classCallCheck(this,t),this.route=a,this.socketService=e,this.gameMunchkinService=r,this.chatService=n,this.authService=i,this.tearDown$=new P.a}return _createClass(t,[{key:"ngOnInit",value:function(){this.initGame(),this.initChat()}},{key:"ngOnDestroy",value:function(){this.gameId&&this.socketService.emit(new L.LeaveGameAction(this.gameId)),this.tearDown$.next(),this.tearDown$.complete()}},{key:"initGame",value:function(){var t=this;this.route.params.pipe(Object(N.a)((function(a){return t.gameId=a.gameId})),Object($.a)((function(){return t.gameId?t.gameMunchkinService.joinGame(t.gameId):Object(T.a)()})),Object($.a)((function(){return t.socketService.listenAnyOf(L.GameUserJoinedAction,L.GameUserLeftAction,L.UserDataChangedAction).pipe(Object(B.a)(-1),Object($.a)((function(){return t.gameId?t.gameMunchkinService.getGameById(t.gameId):Object(T.a)(void 0)})),Object(N.a)((function(a){return t.game=a})))})),Object(F.a)(this.tearDown$)).subscribe()}},{key:"initChat",value:function(){var t=this;this.authService.user$.pipe(Object(F.a)(this.tearDown$)).subscribe((function(a){t.myUserId=a.id,t.chatService.myName=a.name})),this.socketService.listen(L.ChatSendMessageAction).pipe(Object(F.a)(this.tearDown$)).subscribe((function(a){return t.chatService.sendMessage(a.payload.from,a.payload.text)})),this.chatService.myMessages$.pipe(Object(F.a)(this.tearDown$)).subscribe((function(a){if(t.gameId){var e=new L.ChatSendMessageAction({gameId:t.gameId,from:t.chatService.myName,text:a});t.socketService.emit(e)}}))}}]),t}(),et.\u0275fac=function(t){return new(t||et)(b.Mb(A.a),b.Mb(H.a),b.Mb(Y),b.Mb(J.a),b.Mb(z.a))},et.\u0275cmp=b.Gb({type:et,selectors:[["bg-game-munchkin"]],features:[b.zb([J.a])],decls:4,vars:1,consts:[[3,"players","myUserId",4,"ngIf"],[3,"players","myUserId"]],template:function(t,a){1&t&&(b.tc(0,at,1,2,"bg-munchkin-players",0),b.Sb(1,"div"),b.Nb(2,"bg-munchkin-board"),b.Nb(3,"bg-chat"),b.Rb()),2&t&&b.ic("ngIf",a.game)},directives:[u.l,q,K.a,tt],styles:["[_nghost-%COMP%]{height:calc(100vh - 48px)}"],changeDetection:0}),et)}];e("xxSF");var nt,it=((nt=function t(){_classCallCheck(this,t)}).\u0275mod=b.Kb({type:nt}),nt.\u0275inj=b.Jb({factory:function(t){return new(t||nt)},providers:[Y],imports:[[u.c,I,O.b,j.d,A.e.forChild(rt),M.TranslateModule.forChild([{provide:M.T9nsLoaderService,useFactory:function(){return new R.a((function(t){return Object(U.a)(e("LW9I")("./".concat(t,".json"))).pipe(Object(D.a)((function(t){return t.default})))}))}}]),G.a]]}),nt)}}]);