(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{aaQ5:function(e,t,s){var a={"./en.json":["5+an",11],"./ru.json":["ECuT",12],"./ua.json":["GgiT",13]};function n(e){if(!s.o(a,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=a[e],n=t[0];return s.e(t[1]).then((function(){return s.t(n,3)}))}n.keys=function(){return Object.keys(a)},n.id="aaQ5",e.exports=n},kqdH:function(e,t,s){"use strict";s.r(t),s.d(t,"GameTestModule",(function(){return D}));var a=s("sEIs"),n=s("b5yJ"),r=s("GoAz"),i=s("YtkY"),c=s("2yxt"),o=s("py9/"),h=s("l3rL"),u=s("ZTXN"),b=s("ROBh"),l=s("8j5Y"),p=s("TLy2"),d=s("kuMc"),m=s("bZE4"),g=s("lGQG"),f=s("5U9e"),v=s("JPLv"),y=s("EM62"),w=s("vobO");let S=(()=>{class e{constructor(e,t){this.httpClient=e,this.configurationService=t,this.apiBaseUrl=this.configurationService.configuration.apiUrl+"games/test"}joinGame(e){return this.httpClient.post(`${this.apiBaseUrl}/${e}/users`,null)}}return e.\u0275fac=function(t){return new(t||e)(y.Wb(w.b),y.Wb(v.a))},e.\u0275prov=y.Ib({token:e,factory:e.\u0275fac}),e})(),O=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=y.Gb({type:e,selectors:[["bg-test-players"]],decls:1,vars:0,template:function(e,t){1&e&&y.uc(0,"Players\n")},styles:[""],changeDetection:0}),e})(),j=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=y.Gb({type:e,selectors:[["bg-test-board"]],decls:1,vars:0,template:function(e,t){1&e&&y.uc(0,"Board\n")},styles:["[_nghost-%COMP%]{background-color:grey}"],changeDetection:0}),e})();var M=s("+XlM");const k=[{path:":gameId",component:(()=>{class e{constructor(e,t,s,a,n){this.route=e,this.socketService=t,this.gameTestService=s,this.chatService=a,this.authService=n,this.tearDown$=new u.a}ngOnInit(){this.route.params.pipe(Object(l.a)(e=>this.gameId=e.gameId),Object(p.a)(()=>this.gameId?this.gameTestService.joinGame(this.gameId):Object(b.a)()),Object(d.a)(this.tearDown$)).subscribe(),this.authService.user$.pipe(Object(d.a)(this.tearDown$)).subscribe(e=>this.chatService.myName=e.name),this.socketService.listen(h.ChatSendMessageAction).pipe(Object(d.a)(this.tearDown$)).subscribe(e=>this.chatService.sendMessage(e.payload.from,e.payload.text)),this.chatService.myMessages$.pipe(Object(d.a)(this.tearDown$)).subscribe(e=>{if(!this.gameId)return;const t=new h.ChatSendMessageAction({gameId:this.gameId,from:this.chatService.myName,text:e});this.socketService.emit(t)})}ngOnDestroy(){this.gameId&&this.socketService.emit(new h.LeaveGameAction(this.gameId)),this.tearDown$.next(),this.tearDown$.complete()}}return e.\u0275fac=function(t){return new(t||e)(y.Mb(a.a),y.Mb(f.a),y.Mb(S),y.Mb(m.a),y.Mb(g.a))},e.\u0275cmp=y.Gb({type:e,selectors:[["bg-game-test"]],features:[y.zb([m.a])],decls:4,vars:0,template:function(e,t){1&e&&(y.Nb(0,"bg-test-players"),y.Sb(1,"div"),y.Nb(2,"bg-test-board"),y.Nb(3,"bg-chat"),y.Rb())},directives:[O,j,M.a],styles:["[_nghost-%COMP%]{height:calc(100vh - 48px)}"],changeDetection:0}),e})()}];s("xxSF");let D=(()=>{class e{}return e.\u0275mod=y.Kb({type:e}),e.\u0275inj=y.Jb({factory:function(t){return new(t||e)},providers:[S],imports:[[a.e.forChild(k),n.TranslateModule.forChild([{provide:n.T9nsLoaderService,useFactory:()=>new o.a(e=>Object(r.a)(s("aaQ5")(`./${e}.json`)).pipe(Object(i.a)(e=>e.default)))}]),c.a]]}),e})()}}]);